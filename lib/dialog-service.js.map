{"version":3,"file":"dialog-service.js","sources":["../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_getPrototype.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isPlainObject.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/isArray.js","../src/props.ts","../public/fullscreen.svg","../public/minscreen.svg","../src/utils.ts","../src/store.ts","../src/dialog.vue","../src/index.ts"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","import { ButtonProps as ElButtonProps } from 'element-plus'\r\nimport type { PropType, VNode, ExtractPropTypes } from 'vue'\r\nexport const definePropType = <T>(val: any): PropType<T> => val\r\n\r\nexport const componentProps = definePropType<string | VNode | ((vm: vm) => VNode | string)>([\r\n  String,\r\n  Object,\r\n  Function,\r\n])\r\nexport type componentProps = ExtractPropTypes<typeof componentProps>\r\n\r\nexport type buttonPropsParams = BtnConfig | VNode | BtnFnConfig\r\n\r\nexport const buttonProps = definePropType<\r\n  buttonPropsParams[] | VNode | ((opt: { vm: vm; component: any; getFooterBtns: any }) => VNode | buttonPropsParams[])\r\n>([Array, Object, Function])\r\nexport type buttonProps = ExtractPropTypes<typeof buttonProps>\r\n\r\ninterface BtnParam {\r\n  vm: vm\r\n  ctx: BtnParam | buttonProps\r\n  component?: any\r\n}\r\nexport type BtnFnConfig = (opt: BtnParam) => void\r\nexport type getFooterBtnsFn = (cont: any) => buttonPropsParams[] | VNode\r\n\r\nexport interface BtnConfig extends Partial<ElButtonProps> {\r\n  label: string\r\n  onClick?: BtnFnConfig\r\n}\r\n\r\nexport interface vm extends DialogConfig {\r\n  hide: () => void\r\n  close: () => void\r\n  [propName: string]: any\r\n}\r\nexport const DialogBeforeCloseFn = definePropType<(vm: vm, done: any) => void>([Function])\r\n\r\nexport const dialogProps = {\r\n  title: {\r\n    type: componentProps,\r\n    default: '',\r\n  },\r\n  content: {\r\n    type: componentProps,\r\n    default: '',\r\n  },\r\n  buttons: {\r\n    type: buttonProps,\r\n    default: [],\r\n  },\r\n  iframeSrc: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  width: {\r\n    type: String,\r\n    default: '520px',\r\n  },\r\n  height: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  zIndex: {\r\n    type: Number,\r\n    default: 1000,\r\n  },\r\n  top: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  customClass: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  fullScreenEnable: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n  fullscreen: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  canModalClose: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  beforeClose: {\r\n    type: DialogBeforeCloseFn,\r\n    default: () => {},\r\n  },\r\n  afterClose: {\r\n    type: Function,\r\n    default: () => {},\r\n  },\r\n  afterOpen: {\r\n    type: Function,\r\n    default: () => {},\r\n  },\r\n}\r\n\r\nexport type DialogConfig = Partial<ExtractPropTypes<typeof dialogProps>>\r\n","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjAwMDc3NjI5NTcyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQ3OTMiIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMzQxLjQ2OCA1NjkuMTQ2SDE3My40OGMtNjEuNzY2IDAtMTExLjk5MiA1MC4yMjgtMTExLjk5MiAxMTEuOTkzdjE2Ny45ODdjMCA2MS43NjcgNTAuMjI2IDExMS45OTQgMTExLjk5MiAxMTEuOTk0aDE2Ny45OWM2MS43MzcgMCAxMTEuOTkyLTUwLjIyNyAxMTEuOTkyLTExMS45OTRWNjgxLjE0Yy0wLjAwMS02MS43NjUtNTAuMjU2LTExMS45OTMtMTExLjk5NC0xMTEuOTkzeiBtNTUuOTk2IDI3OS45OGMwIDMwLjg3LTI1LjEyNyA1NS45OTctNTUuOTk2IDU1Ljk5N0gxNzMuNDhjLTMwLjg5NiAwLTU1Ljk5NS0yNS4xMjUtNTUuOTk1LTU1Ljk5N1Y2ODEuMTRjMC0zMC44NyAyNS4wOTktNTUuOTk4IDU1Ljk5NS01NS45OThoMTY3Ljk5YzMwLjg2OCAwIDU1Ljk5NSAyNS4xMjggNTUuOTk1IDU1Ljk5OHYxNjcuOTg3eiBtMTMxLjc4OC0zMTYuMThMNzYxLjQ0IDMwMC43NTl2MTg0LjM5M2MwIDE1LjQ3NSAxMi41MjMgMjcuOTk5IDI3Ljk5OCAyNy45OTkgMTUuNDQ5IDAgMjcuOTk5LTEyLjUyNCAyNy45OTktMjhWMjMzLjE3YzAtMTUuNDc1LTEyLjU1LTI3Ljk5Ny0yNy45OTktMjcuOTk3SDUzNy40NTVjLTE1LjQ3NiAwLTI3Ljk5OSAxMi41MjItMjcuOTk5IDI3Ljk5NyAwIDE1LjQ3NiAxMi41MjMgMjcuOTk4IDI3Ljk5OSAyNy45OThoMTg0LjM5Mkw0ODkuNjYgNDkzLjM1NWMtMTAuOTM2IDEwLjkzNi0xMC45MzYgMjguNjU0IDAgMzkuNTlhMjcuOTEgMjcuOTEgMCAwIDAgMTkuNzk2IDguMjAzIDI3LjkxIDI3LjkxIDAgMCAwIDE5Ljc5Ni04LjIwMnogbTMxNi4xOC00NjcuNzY0SDE3My40OGMtNjEuNzY2IDAtMTExLjk5MiA1MC4yMjctMTExLjk5MiAxMTEuOTkydjMwNy45NzljMCAxNS40NzUgMTIuNTIzIDI3Ljk5OSAyNy45OTggMjcuOTk5IDE1LjQ0OCAwIDI3Ljk5OS0xMi41MjQgMjcuOTk5LTI4VjE3Ny4xNzZjMC0zMC44NyAyNS4wOTktNTUuOTk3IDU1Ljk5NS01NS45OTdoNjcxLjk1M2MzMC44NyAwIDU1Ljk5NyAyNS4xMjggNTUuOTk3IDU1Ljk5N3Y2NzEuOTUyYzAgMzAuODctMjUuMTI4IDU1Ljk5Ny01NS45OTcgNTUuOTk3SDUzNy40NTVjLTE1LjQ3NiAwLTI3Ljk5OSAxMi41MjMtMjcuOTk5IDI3Ljk5OCAwIDE1LjQ3NyAxMi41MjMgMjggMjcuOTk5IDI4aDMwNy45NzhjNjEuNzM4IDAgMTExLjk5My01MC4yMjcgMTExLjk5My0xMTEuOTk0VjE3Ny4xNzRjMC02MS43NjYtNTAuMjU1LTExMS45OTItMTExLjk5My0xMTEuOTkyeiIgcC1pZD0iNDc5NCIgZmlsbD0iIzMzMzMzMyI+PC9wYXRoPjwvc3ZnPg==\"","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjAwMDc4MjA1MDAyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwNTIgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE1Mjc0IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjEzMS41IiBoZWlnaHQ9IjEyOCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMC42NjYxMDMgMjkwLjA3NDQ5NG02Ni42MTAyOTEgMGw2MDAuMDM4ODIxIDBxNjYuNjEwMjkxIDAgNjYuNjEwMjkxIDY2LjYxMDI5MWwwIDYwMC4wMzg4MjFxMCA2Ni42MTAyOTEtNjYuNjEwMjkxIDY2LjYxMDI5MWwtNjAwLjAzODgyMSAwcS02Ni42MTAyOTEgMC02Ni42MTAyOTEtNjYuNjEwMjkxbDAtNjAwLjAzODgyMXEwLTY2LjYxMDI5MSA2Ni42MTAyOTEtNjYuNjEwMjkxWiIgZmlsbD0iIzY2NjY2NiIgcC1pZD0iMTUyNzUiPjwvcGF0aD48cGF0aCBkPSJNOTg1LjI1OTQ1NSAwLjY3OTQyNWgtNjAwLjAyNTQ5OWE2Ni42MTAyOTEgNjYuNjEwMjkxIDAgMCAwLTY2LjYxMDI5MSA2Ni42MTAyOTF2MTUxLjg3MTQ2M2g0MTguNTM5MTAxYTY2LjYxMDI5MSA2Ni42MTAyOTEgMCAwIDEgNjYuNjEwMjkxIDY2LjYxMDI5djQ0OC4xNTQwMzdoMTgxLjQ4NjM5OGE2Ni42MTAyOTEgNjYuNjEwMjkxIDAgMCAwIDY2LjYxMDI5MS02Ni42MTAyOTFWNjcuMjg5NzE2YTY2LjYxMDI5MSA2Ni42MTAyOTEgMCAwIDAtNjYuNjEwMjkxLTY2LjYxMDI5MXoiIGZpbGw9IiM2NjY2NjYiIHAtaWQ9IjE1Mjc2Ij48L3BhdGg+PC9zdmc+\"","// 获取静态图片\r\nexport const getAssetsImages = (fileName: string) => new URL(`../public/${fileName}`, import.meta.url).href\r\n","const store: any = {}\r\nexport default {\r\n  setInstance(id: string, proxy: any) {\r\n    store[id] = proxy\r\n  },\r\n  getInstance(id: string) {\r\n    return store[id]\r\n  },\r\n}\r\n","<script lang=\"tsx\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'DialogService',\n})\n</script>\n<template>\r\n  <el-dialog\r\n    draggable\r\n    v-model=\"dialogVisible\"\r\n    :width=\"width\"\r\n    :top=\"top\"\r\n    :z-index=\"zIndex\"\r\n    :custom-class=\"\r\n      `service-dialog\r\n      ${customClass}\r\n      ${fullscreen ? 'fullscreen' : ''}\r\n      ${iframeSrc ? 'is-iframe' : ''}`\r\n    \"\r\n    :fullscreen=\"fullscreen\"\r\n    :before-close=\"handleBeforeClose\"\r\n    v-on=\"dialogEvents\"\r\n    :close-on-click-modal=\"canModalClose\"\r\n    :close-on-press-escape=\"canModalClose\"\r\n  >\r\n    <template class=\"title\" #header>\r\n      <div v-if=\"titleComponent\">\r\n        <component :is=\"titleComponent\" class=\"service-dialog-title\" />\r\n      </div>\r\n      <div v-else class=\"service-dialog__title\">\r\n        {{ title }}\r\n      </div>\r\n      <div v-if=\"fullScreenEnable\" class=\"service-dialog__icon\" @click=\"handleFullScreen\">\r\n        <img :src=\"fullscreen ? getAssetsImages('minscreen.svg') : getAssetsImages('fullscreen.svg')\" />\r\n      </div>\r\n    </template>\r\n\r\n    <div ref=\"dialogContentWrap\" class=\"service-dialog__content\" :style=\"{ height }\">\r\n      <template v-if=\"contentComponent\">\r\n        <component ref=\"dialogContent\" :is=\"isVNode(contentComponent) ? contentComponent : contentComponent()\" />\r\n      </template>\r\n      <template v-else>\r\n        {{ content }}\r\n      </template>\r\n    </div>\r\n\r\n    <template #footer>\r\n      <div class=\"service-dialog__footer\">\r\n        <component v-if=\"isVNode(_button)\" :is=\"_button\" />\r\n        <component v-else v-for=\"item in _button\" :is=\"generateBtn(item)\" />\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"tsx\" name=\"DialogService\">\r\nimport { ElDialog, ElButton, ElLoading } from 'element-plus'\r\n\r\nimport { ref, computed, watch, onMounted, isVNode, nextTick } from 'vue'\r\nimport { dialogProps } from './props'\r\nimport type { componentProps, BtnConfig, buttonPropsParams, getFooterBtnsFn } from './props'\r\n\r\nimport { getAssetsImages } from './utils'\r\nimport { isPlainObject, isFunction, isArray } from 'lodash'\r\nimport store from './store'\r\n\r\nconst dialogVisible = ref(false)\r\n\r\nlet iframeLoading: any\r\n\r\nconst _height = ref('')\r\nconst emit = defineEmits({\r\n  destroy: () => true,\r\n})\r\n\r\nlet vm: any = null\r\n\r\nconst props = defineProps(dialogProps)\r\nconst {\r\n  content,\r\n  customClass,\r\n  fullScreenEnable,\r\n  iframeSrc,\r\n  top,\r\n  zIndex,\r\n  beforeClose,\r\n  afterClose,\r\n  afterOpen,\r\n  canModalClose,\r\n} = props\r\n\r\nconst fullscreen = ref(props.fullscreen)\r\nconst height = ref(props.height)\r\nconst title = ref(props.title)\r\nconst buttons = ref(props.buttons)\r\n\r\nconst dialogContent = ref<HTMLDivElement>()\r\nconst dialogContentWrap = ref<HTMLDivElement>()\r\n\r\nconst dialogEvents = {\r\n  closed: () => {\r\n    emit('destroy')\r\n    isFunction(afterClose) && afterClose(vm)\r\n  },\r\n  opened: () => {\r\n    isFunction(afterOpen) && afterOpen(vm)\r\n  },\r\n}\r\n\r\nconst titleComponent = getComponent(title.value)\r\nconst contentComponent = getComponent(content)\r\nconst _button = computed(() => {\r\n  if (isVNode(buttons.value)) {\r\n    return buttons.value\r\n  }\r\n\r\n  if (isFunction(buttons.value)) {\r\n    return buttons.value({\r\n      vm: store.getInstance('dialog'),\r\n      component: dialogContent.value,\r\n      getFooterBtns,\r\n    })\r\n  }\r\n\r\n  if (isArray(buttons.value)) {\r\n    let btns: buttonPropsParams[] = []\r\n    buttons.value.forEach((item: buttonPropsParams) => {\r\n      if (typeof item === 'string') {\r\n        console.warn('请传入正确的 buttons 参数')\r\n      } else if (isPlainObject(item) || isFunction(item) || isVNode(item)) {\r\n        btns.push(item)\r\n      }\r\n    })\r\n    return btns\r\n  }\r\n})\r\n\r\nwatch(\r\n  () => fullscreen.value,\r\n  (val) => {\r\n    height.value = val ? '100%' : _height.value\r\n  }\r\n)\r\n\r\nfunction handleFullScreen() {\r\n  fullscreen.value = !fullscreen.value\r\n}\r\n\r\nfunction getComponent(data: componentProps) {\r\n  return computed(() => {\r\n    if (isFunction(data)) {\r\n      return data.bind(null, vm)\r\n    }\r\n\r\n    if (isVNode(data)) {\r\n      return data\r\n    }\r\n\r\n    if (!data && iframeSrc) {\r\n      return (\r\n        <iframe\r\n          src={iframeSrc}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          frameborder=\"0\"\r\n          scrolling=\"auto\"\r\n          onReady\r\n          onLoad={() => {\r\n            iframeLoading.close()\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  })\r\n}\r\n\r\nfunction generateBtn(btn: buttonPropsParams) {\r\n  if (isVNode(btn)) {\r\n    return btn\r\n  }\r\n\r\n  if (isFunction(btn)) {\r\n    return btn({\r\n      vm,\r\n      ctx: _button,\r\n      component: dialogContent.value,\r\n    })\r\n  }\r\n\r\n  const { label, type, ...props } = btn\r\n  const btnProps = { ...props, onClick: () => handleBtnClick(btn) }\r\n  return (\r\n    <ElButton type={type} {...btnProps}>\r\n      {label}\r\n    </ElButton>\r\n  )\r\n}\r\n\r\nfunction handleBtnClick(btn: BtnConfig) {\r\n  if (isFunction(btn.onClick)) {\r\n    btn.onClick({\r\n      vm,\r\n      ctx: btn,\r\n      component: dialogContent.value,\r\n    })\r\n  }\r\n}\r\n\r\nfunction getFooterBtns(cb: getFooterBtnsFn) {\r\n  setTimeout(() => {\r\n    cb && (buttons.value = cb(dialogContent.value))\r\n  })\r\n}\r\n\r\nfunction hide() {\r\n  dialogVisible.value = false\r\n}\r\n\r\nfunction close() {\r\n  if (isFunction(beforeClose)) {\r\n    beforeClose(vm, hide)\r\n  } else {\r\n    hide()\r\n  }\r\n}\r\n\r\nfunction handleBeforeClose(done: any) {\r\n  if (isFunction(beforeClose)) {\r\n    beforeClose(vm, done)\r\n  } else {\r\n    done()\r\n  }\r\n}\r\n\r\nconst exposeData = {\r\n  hide,\r\n  close,\r\n  title,\r\n  buttons,\r\n  fullscreen,\r\n  height\r\n}\r\ndefineExpose(exposeData)\r\n\r\nstore.setInstance('dialog', exposeData)\r\n\r\nonMounted(() => {\r\n  dialogVisible.value = true\r\n  _height.value = height.value\r\n  nextTick(() => {\r\n    vm = store.getInstance('dialog')\r\n  })\r\n  if (!iframeSrc) return\r\n  setTimeout(() => {\r\n    iframeLoading = ElLoading.service({\r\n      target: dialogContentWrap.value\r\n    })\r\n  }, 0)\r\n})\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.service-dialog {\r\n  .el-dialog {\r\n    max-width: 90%;\r\n    &--center .el-dialog__title {\r\n      left: 50% !important;\r\n      transform: translateX(-50%);\r\n    }\r\n  }\r\n\r\n  &.is-fullscreen {\r\n    max-width: initial;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    .el-dialog__body {\r\n      flex-grow: 1;\r\n      overflow: auto;\r\n    }\r\n  }\r\n\r\n  &__title {\r\n    font-size: 16px;\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 20px;\r\n  }\r\n\r\n  &__icon {\r\n    position: absolute;\r\n    right: 36px;\r\n    top: 14px;\r\n    line-height: 1;\r\n    cursor: pointer;\r\n    &:hover {\r\n      color: #409eff;\r\n    }\r\n    & > img {\r\n      width: 1em;\r\n      height: 1em;\r\n    }\r\n  }\r\n\r\n  .el-dialog__header {\r\n    padding: 10px 15px;\r\n    margin-right: 0;\r\n    height: 24px;\r\n    box-sizing: content-box;\r\n    border-bottom: 1px solid #ebeef5;\r\n    .el-dialog__headerbtn {\r\n      top: 15px;\r\n      right: 13px;\r\n      width: auto;\r\n      height: auto;\r\n      & > i {\r\n        color: #333;\r\n      }\r\n    }\r\n  }\r\n  .el-dialog__body {\r\n    padding: 0;\r\n    color: #333;\r\n  }\r\n  .el-dialog__footer {\r\n    padding: 10px 20px;\r\n    border-top: 1px solid #ebeef5;\r\n  }\r\n\r\n  &.is-iframe {\r\n    .service-dialog__content {\r\n      padding: 0;\r\n      line-height: 0;\r\n    }\r\n  }\r\n  &__content {\r\n    line-height: 1.4;\r\n    box-sizing: border-box;\r\n    overflow: auto;\r\n  }\r\n  &__footer {\r\n    & > * {\r\n      display: inline-block;\r\n    }\r\n    .el-button {\r\n      font-size: 12px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { createApp } from 'vue'\r\nimport type { AppContext } from 'vue'\r\n\r\nimport { DialogConfig } from './props'\r\nimport dialog from './dialog.vue'\r\nimport store from './store'\r\n\r\nconst service = (options: DialogConfig = {}, appContext?: AppContext) => {\r\n  const container = document.createElement('div')\r\n\r\n  const props = {\r\n    ...options,\r\n    onDestroy: () => {\r\n      App.unmount()\r\n    },\r\n  }\r\n\r\n  const App = createApp(dialog, props)\r\n  if (appContext) {\r\n    // 获取外部上下文，主要用于pinia能插件的实例化\r\n    Object.getOwnPropertySymbols(appContext.provides)?.forEach(key => {\r\n      App.provide(key, appContext.provides[key])\r\n    })\r\n  }\r\n\r\n  App.mount(container)\r\n  document.body.appendChild(container.firstElementChild!)\r\n\r\n  const instance = store.getInstance('dialog')\r\n\r\n  return instance\r\n}\r\n\r\nexport default service\r\n"],"names":["freeGlobal","global","require$$0","root","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","objectToString","require$$1","require$$2","baseGetTag","overArg","getPrototype","isObjectLike","isObject","closed","vm","buttons","customClass","iframeSrc","component","getFooterBtns","afterOpen","canModalClose","btns","ref","value","title","item","console","dialogContentWrap","emit","height","isFunction","titleComponent","getComponent","computed","isPlainObject","iframeLoading","watch","fullscreen","ctx","data","label","_createVNode","type","setTimeout","cb","dialogVisible","props","hide","onClick","_mergeProps2","handleBtnClick","close","expose","exposeData","store","onMounted","nextTick","target","dialog"],"mappings":"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"}